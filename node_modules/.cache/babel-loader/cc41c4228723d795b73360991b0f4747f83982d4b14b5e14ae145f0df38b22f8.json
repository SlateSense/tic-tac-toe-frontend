{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OM\\\\Desktop\\\\tic-tac-toe\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PAYOUTS = {\n  50: {\n    winner: 80\n  },\n  300: {\n    winner: 500\n  },\n  500: {\n    winner: 800\n  },\n  1000: {\n    winner: 1700\n  },\n  5000: {\n    winner: 8000\n  },\n  10000: {\n    winner: 17000\n  }\n};\nconst BET_OPTIONS = Object.keys(PAYOUTS).map(_c = k => ({\n  amount: parseInt(k, 10),\n  winnings: PAYOUTS[k].winner\n}));\n_c2 = BET_OPTIONS;\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:4000';\nexport default function App() {\n  _s();\n  const [activeTab, setActiveTab] = useState('Menu');\n  const [gameState, setGameState] = useState('splash');\n  const [socket, setSocket] = useState(null);\n  const [socketId, setSocketId] = useState(null);\n  const [betAmount, setBetAmount] = useState(() => localStorage.getItem('ttt_lastBet') || '50');\n  const [payoutAmount, setPayoutAmount] = useState(() => {\n    const saved = localStorage.getItem('ttt_lastBet');\n    const opt = BET_OPTIONS.find(o => o.amount === parseInt(saved || '50'));\n    return opt ? String(opt.winnings) : '80';\n  });\n  const [lightningAddress, setLightningAddress] = useState(localStorage.getItem('ttt_lightningAddress') || '');\n\n  // Payment state\n  const [paymentInfo, setPaymentInfo] = useState(null); // { invoiceId, lightningInvoice, hostedInvoiceUrl, amountSats, amountUSD }\n  const [isWaitingForPayment, setIsWaitingForPayment] = useState(false);\n\n  // Game state\n  const [gameId, setGameId] = useState(null);\n  const [symbol, setSymbol] = useState(null); // 'X' | 'O'\n  const [turn, setTurn] = useState(null); // socketId whose turn\n  const [board, setBoard] = useState(Array(9).fill(null));\n  const [message, setMessage] = useState('');\n  const [lastMove, setLastMove] = useState(null);\n  const [winningLine, setWinningLine] = useState(null);\n  const [turnDeadline, setTurnDeadline] = useState(null); // epoch ms\n  const [timeLeft, setTimeLeft] = useState(null); // seconds\n\n  // History\n  const [history, setHistory] = useState(() => {\n    try {\n      return JSON.parse(localStorage.getItem('ttt_history') || '[]');\n    } catch {\n      return [];\n    }\n  });\n  useEffect(() => {\n    const s = io(BACKEND_URL, {\n      transports: ['websocket', 'polling']\n    });\n    setSocket(s);\n    const handlers = {\n      connect: () => {\n        setSocketId(s.id);\n      },\n      paymentRequest: ({\n        lightningInvoice,\n        hostedInvoiceUrl,\n        amountSats,\n        amountUSD,\n        invoiceId,\n        demo\n      }) => {\n        setPaymentInfo({\n          lightningInvoice,\n          hostedInvoiceUrl,\n          amountSats,\n          amountUSD,\n          invoiceId,\n          demo: !!demo\n        });\n        setIsWaitingForPayment(true);\n        setMessage(`Pay ${amountSats} SATS (~$${amountUSD})`);\n        setGameState('awaitingPayment');\n      },\n      paymentVerified: () => {\n        setIsWaitingForPayment(false);\n        setMessage('Payment verified! Waiting for opponent...');\n      },\n      transaction: ({\n        message\n      }) => {\n        setMessage(message);\n      },\n      startGame: ({\n        gameId,\n        symbol,\n        turn,\n        message,\n        turnDeadline\n      }) => {\n        setGameId(gameId);\n        setSymbol(symbol);\n        setTurn(turn);\n        setBoard(Array(9).fill(null));\n        setLastMove(null);\n        setWinningLine(null);\n        setTurnDeadline(turnDeadline || null);\n        setGameState('playing');\n        setMessage(message || (turn === s.id ? 'Your move' : \"Opponent's move\"));\n      },\n      boardUpdate: ({\n        board,\n        lastMove\n      }) => {\n        setBoard(board);\n        setLastMove(Number.isInteger(lastMove) ? lastMove : null);\n      },\n      nextTurn: ({\n        turn,\n        turnDeadline\n      }) => {\n        setTurn(turn);\n        setTurnDeadline(turnDeadline || null);\n        setMessage(turn === s.id ? 'Your move' : \"Opponent's move\");\n      },\n      gameEnd: ({\n        message,\n        winnerSymbol,\n        winningLine\n      }) => {\n        var _PAYOUTS$betAmount;\n        setGameState('finished');\n        setMessage(message);\n        setWinningLine(winningLine || null);\n        setTurnDeadline(null);\n        // Save to history\n        const isWin = message && message.toLowerCase().includes('won');\n        const entry = {\n          id: `g_${Date.now()}`,\n          ts: new Date().toISOString(),\n          bet: parseInt(betAmount, 10),\n          outcome: isWin ? 'win' : 'loss',\n          amount: isWin ? ((_PAYOUTS$betAmount = PAYOUTS[betAmount]) === null || _PAYOUTS$betAmount === void 0 ? void 0 : _PAYOUTS$betAmount.winner) - parseInt(betAmount, 10) : -parseInt(betAmount, 10)\n        };\n        const newHist = [entry, ...history].slice(0, 100);\n        setHistory(newHist);\n        localStorage.setItem('ttt_history', JSON.stringify(newHist));\n      }\n    };\n    Object.entries(handlers).forEach(([evt, fn]) => s.on(evt, fn));\n    s.connect();\n    return () => {\n      Object.entries(handlers).forEach(([evt, fn]) => s.off(evt, fn));\n      s.disconnect();\n    };\n  }, [BACKEND_URL, betAmount, history]);\n  const doJoin = () => {\n    if (!socket) return;\n    const bet = parseInt(betAmount, 10);\n    socket.emit('joinGame', {\n      betAmount: bet,\n      lightningAddress: lightningAddress || 'anon'\n    });\n    localStorage.setItem('ttt_lastBet', String(bet));\n    localStorage.setItem('ttt_lightningAddress', lightningAddress || '');\n  };\n  const simulatePayment = () => {\n    if (!socket || !paymentInfo) return;\n    socket.emit('simulatePayment', {\n      invoiceId: paymentInfo.invoiceId\n    });\n  };\n  const copyInvoice = async () => {\n    try {\n      if (!paymentInfo) return;\n      const text = paymentInfo.lightningInvoice || paymentInfo.hostedInvoiceUrl;\n      if (!text) return;\n      await navigator.clipboard.writeText(text);\n      setMessage('Copied payment request to clipboard');\n    } catch (_) {}\n  };\n  const onCellClick = idx => {\n    if (gameState !== 'playing') return;\n    if (turn !== socketId) return; // not your turn\n    if (board[idx] !== null) return;\n    socket.emit('makeMove', {\n      gameId,\n      position: idx\n    });\n  };\n  const resign = () => {\n    if (!socket || gameState !== 'playing') return;\n    socket.emit('resign', {\n      gameId\n    });\n  };\n  const resetToMenu = () => {\n    setGameState('splash');\n    setActiveTab('Menu');\n    setMessage('');\n    setBoard(Array(9).fill(null));\n    setLastMove(null);\n    setWinningLine(null);\n    setTurnDeadline(null);\n    setPaymentInfo(null);\n    setIsWaitingForPayment(false);\n    // defaults 50 -> 80\n    setBetAmount('50');\n    setPayoutAmount('80');\n  };\n  useEffect(() => {\n    const opt = BET_OPTIONS.find(o => o.amount === parseInt(betAmount, 10));\n    setPayoutAmount(String((opt === null || opt === void 0 ? void 0 : opt.winnings) || 0));\n  }, [betAmount]);\n\n  // Turn countdown\n  useEffect(() => {\n    let t;\n    const tick = () => {\n      if (!turnDeadline) {\n        setTimeLeft(null);\n        return;\n      }\n      const ms = Math.max(0, Math.floor(turnDeadline - Date.now()));\n      setTimeLeft(Math.ceil(ms / 1000));\n      if (ms <= 0) return;\n      t = setTimeout(tick, 250);\n    };\n    tick();\n    return () => {\n      if (t) clearTimeout(t);\n    };\n  }, [turnDeadline]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Tic-Tac-Toe \\u26A1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: ['Menu', 'Join', 'History'].map(t => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: activeTab === t ? 'active' : '',\n        onClick: () => setActiveTab(t),\n        children: t\n      }, t, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), activeTab === 'Menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Welcome! Play Tic-Tac-Toe with Lightning bets.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setActiveTab('Join');\n        },\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this), activeTab === 'Join' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Lightning Address\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: lightningAddress,\n          onChange: e => setLightningAddress(e.target.value),\n          placeholder: \"e.g. alice@getalby.com\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Bet Amount (SATS)\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: betAmount,\n          onChange: e => setBetAmount(e.target.value),\n          children: BET_OPTIONS.map(o => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: o.amount,\n            children: [o.amount, \" SATS (Win \", o.winnings, \")\"]\n          }, o.amount, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: doJoin,\n        children: \"Join & Pay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), paymentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"qr\",\n          children: /*#__PURE__*/_jsxDEV(QRCodeSVG, {\n            value: paymentInfo.lightningInvoice || paymentInfo.hostedInvoiceUrl || '',\n            size: 180\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"actions\",\n          children: [paymentInfo.hostedInvoiceUrl ? /*#__PURE__*/_jsxDEV(\"a\", {\n            href: paymentInfo.hostedInvoiceUrl,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: \"Open Payment Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 19\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: copyInvoice,\n            children: \"Copy Payment Request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this), paymentInfo.demo ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: simulatePayment,\n            children: \"I have paid (demo)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 19\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), activeTab === 'Menu' || activeTab === 'Join' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }, this) : null, activeTab === 'Menu' || activeTab === 'Join' ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel\",\n      children: gameState === 'playing' || gameState === 'finished' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"board\",\n          children: board.map((cell, idx) => {\n            const isWin = Array.isArray(winningLine) && winningLine.includes(idx);\n            const isLast = lastMove === idx;\n            const cls = `cell${isWin ? ' win' : ''}${isLast ? ' last' : ''}`;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: cls,\n              onClick: () => onCellClick(idx),\n              children: cell || ''\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status\",\n          children: [message, ' ', turn === socketId && timeLeft !== null ? `(⏳ ${timeLeft}s)` : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"actions\",\n          children: [gameState === 'playing' ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resign,\n            children: \"Resign\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 44\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetToMenu,\n            children: \"Return to Menu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }, this), activeTab === 'History' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Recent Games\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }, this), history.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No games yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"history\",\n        children: history.map(h => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: new Date(h.ts).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Bet: \", h.bet]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [h.outcome === 'win' ? '+' : '', h.amount, \" SATS\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 19\n          }, this)]\n        }, h.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Rmbqvnw8WPIv/GIjVIxTExkiXeY=\");\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"BET_OPTIONS$Object.keys(PAYOUTS).map\");\n$RefreshReg$(_c2, \"BET_OPTIONS\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","io","QRCodeSVG","jsxDEV","_jsxDEV","Fragment","_Fragment","PAYOUTS","winner","BET_OPTIONS","Object","keys","map","_c","k","amount","parseInt","winnings","_c2","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","App","_s","activeTab","setActiveTab","gameState","setGameState","socket","setSocket","socketId","setSocketId","betAmount","setBetAmount","localStorage","getItem","payoutAmount","setPayoutAmount","saved","opt","find","o","String","lightningAddress","setLightningAddress","paymentInfo","setPaymentInfo","isWaitingForPayment","setIsWaitingForPayment","gameId","setGameId","symbol","setSymbol","turn","setTurn","board","setBoard","Array","fill","message","setMessage","lastMove","setLastMove","winningLine","setWinningLine","turnDeadline","setTurnDeadline","timeLeft","setTimeLeft","history","setHistory","JSON","parse","s","transports","handlers","connect","id","paymentRequest","lightningInvoice","hostedInvoiceUrl","amountSats","amountUSD","invoiceId","demo","paymentVerified","transaction","startGame","boardUpdate","Number","isInteger","nextTurn","gameEnd","winnerSymbol","_PAYOUTS$betAmount","isWin","toLowerCase","includes","entry","Date","now","ts","toISOString","bet","outcome","newHist","slice","setItem","stringify","entries","forEach","evt","fn","on","off","disconnect","doJoin","emit","simulatePayment","copyInvoice","text","navigator","clipboard","writeText","_","onCellClick","idx","position","resign","resetToMenu","t","tick","ms","Math","max","floor","ceil","setTimeout","clearTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","e","target","placeholder","size","href","rel","cell","isArray","isLast","cls","length","h","toLocaleString","_c3","$RefreshReg$"],"sources":["C:/Users/OM/Desktop/tic-tac-toe/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport { QRCodeSVG } from 'qrcode.react';\n\nconst PAYOUTS = {\n  50: { winner: 80 },\n  300: { winner: 500 },\n  500: { winner: 800 },\n  1000: { winner: 1700 },\n  5000: { winner: 8000 },\n  10000: { winner: 17000 },\n};\nconst BET_OPTIONS = Object.keys(PAYOUTS).map(k => ({ amount: parseInt(k, 10), winnings: PAYOUTS[k].winner }));\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:4000';\n\nexport default function App() {\n  const [activeTab, setActiveTab] = useState('Menu');\n  const [gameState, setGameState] = useState('splash');\n  const [socket, setSocket] = useState(null);\n  const [socketId, setSocketId] = useState(null);\n\n  const [betAmount, setBetAmount] = useState(() => localStorage.getItem('ttt_lastBet') || '50');\n  const [payoutAmount, setPayoutAmount] = useState(() => {\n    const saved = localStorage.getItem('ttt_lastBet');\n    const opt = BET_OPTIONS.find(o => o.amount === parseInt(saved || '50'));\n    return opt ? String(opt.winnings) : '80';\n  });\n  const [lightningAddress, setLightningAddress] = useState(localStorage.getItem('ttt_lightningAddress') || '');\n\n  // Payment state\n  const [paymentInfo, setPaymentInfo] = useState(null); // { invoiceId, lightningInvoice, hostedInvoiceUrl, amountSats, amountUSD }\n  const [isWaitingForPayment, setIsWaitingForPayment] = useState(false);\n\n  // Game state\n  const [gameId, setGameId] = useState(null);\n  const [symbol, setSymbol] = useState(null); // 'X' | 'O'\n  const [turn, setTurn] = useState(null); // socketId whose turn\n  const [board, setBoard] = useState(Array(9).fill(null));\n  const [message, setMessage] = useState('');\n  const [lastMove, setLastMove] = useState(null);\n  const [winningLine, setWinningLine] = useState(null);\n  const [turnDeadline, setTurnDeadline] = useState(null); // epoch ms\n  const [timeLeft, setTimeLeft] = useState(null); // seconds\n\n  // History\n  const [history, setHistory] = useState(() => {\n    try { return JSON.parse(localStorage.getItem('ttt_history') || '[]'); } catch { return []; }\n  });\n\n  useEffect(() => {\n    const s = io(BACKEND_URL, { transports: ['websocket', 'polling'] });\n    setSocket(s);\n\n    const handlers = {\n      connect: () => {\n        setSocketId(s.id);\n      },\n      paymentRequest: ({ lightningInvoice, hostedInvoiceUrl, amountSats, amountUSD, invoiceId, demo }) => {\n        setPaymentInfo({ lightningInvoice, hostedInvoiceUrl, amountSats, amountUSD, invoiceId, demo: !!demo });\n        setIsWaitingForPayment(true);\n        setMessage(`Pay ${amountSats} SATS (~$${amountUSD})`);\n        setGameState('awaitingPayment');\n      },\n      paymentVerified: () => {\n        setIsWaitingForPayment(false);\n        setMessage('Payment verified! Waiting for opponent...');\n      },\n      transaction: ({ message }) => {\n        setMessage(message);\n      },\n      startGame: ({ gameId, symbol, turn, message, turnDeadline }) => {\n        setGameId(gameId);\n        setSymbol(symbol);\n        setTurn(turn);\n        setBoard(Array(9).fill(null));\n        setLastMove(null);\n        setWinningLine(null);\n        setTurnDeadline(turnDeadline || null);\n        setGameState('playing');\n        setMessage(message || (turn === s.id ? 'Your move' : \"Opponent's move\"));\n      },\n      boardUpdate: ({ board, lastMove }) => {\n        setBoard(board);\n        setLastMove(Number.isInteger(lastMove) ? lastMove : null);\n      },\n      nextTurn: ({ turn, turnDeadline }) => {\n        setTurn(turn);\n        setTurnDeadline(turnDeadline || null);\n        setMessage(turn === s.id ? 'Your move' : \"Opponent's move\");\n      },\n      gameEnd: ({ message, winnerSymbol, winningLine }) => {\n        setGameState('finished');\n        setMessage(message);\n        setWinningLine(winningLine || null);\n        setTurnDeadline(null);\n        // Save to history\n        const isWin = message && message.toLowerCase().includes('won');\n        const entry = {\n          id: `g_${Date.now()}`,\n          ts: new Date().toISOString(),\n          bet: parseInt(betAmount, 10),\n          outcome: isWin ? 'win' : 'loss',\n          amount: isWin ? (PAYOUTS[betAmount]?.winner - parseInt(betAmount,10)) : -parseInt(betAmount,10),\n        };\n        const newHist = [entry, ...history].slice(0, 100);\n        setHistory(newHist);\n        localStorage.setItem('ttt_history', JSON.stringify(newHist));\n      }\n    };\n\n    Object.entries(handlers).forEach(([evt, fn]) => s.on(evt, fn));\n    s.connect();\n\n    return () => {\n      Object.entries(handlers).forEach(([evt, fn]) => s.off(evt, fn));\n      s.disconnect();\n    };\n  }, [BACKEND_URL, betAmount, history]);\n\n  const doJoin = () => {\n    if (!socket) return;\n    const bet = parseInt(betAmount, 10);\n    socket.emit('joinGame', { betAmount: bet, lightningAddress: lightningAddress || 'anon' });\n    localStorage.setItem('ttt_lastBet', String(bet));\n    localStorage.setItem('ttt_lightningAddress', lightningAddress || '');\n  };\n\n  const simulatePayment = () => {\n    if (!socket || !paymentInfo) return;\n    socket.emit('simulatePayment', { invoiceId: paymentInfo.invoiceId });\n  };\n\n  const copyInvoice = async () => {\n    try {\n      if (!paymentInfo) return;\n      const text = paymentInfo.lightningInvoice || paymentInfo.hostedInvoiceUrl;\n      if (!text) return;\n      await navigator.clipboard.writeText(text);\n      setMessage('Copied payment request to clipboard');\n    } catch (_) {}\n  };\n\n  const onCellClick = (idx) => {\n    if (gameState !== 'playing') return;\n    if (turn !== socketId) return; // not your turn\n    if (board[idx] !== null) return;\n    socket.emit('makeMove', { gameId, position: idx });\n  };\n\n  const resign = () => {\n    if (!socket || gameState !== 'playing') return;\n    socket.emit('resign', { gameId });\n  };\n\n  const resetToMenu = () => {\n    setGameState('splash');\n    setActiveTab('Menu');\n    setMessage('');\n    setBoard(Array(9).fill(null));\n    setLastMove(null);\n    setWinningLine(null);\n    setTurnDeadline(null);\n    setPaymentInfo(null);\n    setIsWaitingForPayment(false);\n    // defaults 50 -> 80\n    setBetAmount('50');\n    setPayoutAmount('80');\n  };\n\n  useEffect(() => {\n    const opt = BET_OPTIONS.find(o => o.amount === parseInt(betAmount, 10));\n    setPayoutAmount(String(opt?.winnings || 0));\n  }, [betAmount]);\n\n  // Turn countdown\n  useEffect(() => {\n    let t;\n    const tick = () => {\n      if (!turnDeadline) { setTimeLeft(null); return; }\n      const ms = Math.max(0, Math.floor(turnDeadline - Date.now()));\n      setTimeLeft(Math.ceil(ms / 1000));\n      if (ms <= 0) return;\n      t = setTimeout(tick, 250);\n    };\n    tick();\n    return () => { if (t) clearTimeout(t); };\n  }, [turnDeadline]);\n\n  return (\n    <div className=\"app\">\n      <h1>Tic-Tac-Toe ⚡</h1>\n      <div className=\"tabs\">\n        {['Menu','Join','History'].map(t => (\n          <button key={t} className={activeTab===t? 'active':''} onClick={()=>setActiveTab(t)}>{t}</button>\n        ))}\n      </div>\n\n      {activeTab === 'Menu' && (\n        <div className=\"panel\">\n          <p>Welcome! Play Tic-Tac-Toe with Lightning bets.</p>\n          <button onClick={() => { setActiveTab('Join'); }}>Start</button>\n        </div>\n      )}\n\n      {activeTab === 'Join' && (\n        <div className=\"panel\">\n          <label>\n            Lightning Address\n            <input value={lightningAddress} onChange={e=>setLightningAddress(e.target.value)} placeholder=\"e.g. alice@getalby.com\" />\n          </label>\n          <label>\n            Bet Amount (SATS)\n            <select value={betAmount} onChange={e=>setBetAmount(e.target.value)}>\n              {BET_OPTIONS.map(o => (\n                <option key={o.amount} value={o.amount}>{o.amount} SATS (Win {o.winnings})</option>\n              ))}\n            </select>\n          </label>\n          <button onClick={doJoin}>Join & Pay</button>\n\n          {paymentInfo && (\n            <div className=\"payment\">\n              <p>{message}</p>\n              <div className=\"qr\">\n                <QRCodeSVG value={paymentInfo.lightningInvoice || paymentInfo.hostedInvoiceUrl || ''} size={180} />\n              </div>\n              <div className=\"actions\">\n                {paymentInfo.hostedInvoiceUrl ? (\n                  <a href={paymentInfo.hostedInvoiceUrl} target=\"_blank\" rel=\"noreferrer\">Open Payment Page</a>\n                ) : null}\n                <button onClick={copyInvoice}>Copy Payment Request</button>\n                {paymentInfo.demo ? (\n                  <button onClick={simulatePayment}>I have paid (demo)</button>\n                ) : null}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'Menu' || activeTab === 'Join' ? (\n        <div className=\"status\">{message}</div>\n      ) : null}\n\n      {activeTab === 'Menu' || activeTab === 'Join' ? null : (\n        <div className=\"panel\">\n          {gameState === 'playing' || gameState === 'finished' ? (\n            <>\n              <div className=\"board\">\n                {board.map((cell, idx) => {\n                  const isWin = Array.isArray(winningLine) && winningLine.includes(idx);\n                  const isLast = lastMove === idx;\n                  const cls = `cell${isWin ? ' win' : ''}${isLast ? ' last' : ''}`;\n                  return (\n                    <button key={idx} className={cls} onClick={() => onCellClick(idx)}>\n                      {cell || ''}\n                    </button>\n                  );\n                })}\n              </div>\n              <div className=\"status\">\n                {message}{' '}\n                {turn === socketId && timeLeft !== null ? `(⏳ ${timeLeft}s)` : ''}\n              </div>\n              <div className=\"actions\">\n                {gameState === 'playing' ? <button onClick={resign}>Resign</button> : null}\n                <button onClick={resetToMenu}>Return to Menu</button>\n              </div>\n            </>\n          ) : (\n            <div className=\"status\">{message}</div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'History' && (\n        <div className=\"panel\">\n          <h3>Recent Games</h3>\n          {history.length === 0 ? (\n            <p>No games yet.</p>\n          ) : (\n            <ul className=\"history\">\n              {history.map(h => (\n                <li key={h.id}>\n                  <span>{new Date(h.ts).toLocaleString()}</span>\n                  <span>Bet: {h.bet}</span>\n                  <span>{h.outcome === 'win' ? '+': ''}{h.amount} SATS</span>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}